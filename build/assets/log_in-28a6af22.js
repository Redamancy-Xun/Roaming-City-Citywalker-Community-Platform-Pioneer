import{d as y,s as S,i as C,a as V,c as E,b as s,v as f,x as h,u as l,e as r,w as p,f as u,n as I,F as B,g as N,r as m,p as O,h as U}from"./index-7421df47.js";import{C as D}from"./index-c3e15be2.js";import"./index-3fb4e60e.js";import{E as R}from"./el-button-b3280c6e.js";import{_ as z}from"./Back-64c2790a.js";import{A}from"./Citywalker-1838a2bc.js";import{u as F}from"./userStore-b1331fcf.js";import{a as n}from"./function-call-eaca0cc0.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-dcd1bf9c.js";import"./use-touch-fbe6bb65.js";import"./use-scope-id-02176d93.js";import"./index-05100a24.js";const H=""+new URL("iconthree-c9747d4d.png",import.meta.url).href,_=i=>(O("data-v-795a7ab4"),i=i(),U(),i),L=N('<div class="clouds" data-v-795a7ab4><div class="cloud" id="cloud1" data-v-795a7ab4></div><div class="cloud" id="cloud2" data-v-795a7ab4></div><div class="cloud" id="cloud3" data-v-795a7ab4></div><div class="cloud" id="cloud4" data-v-795a7ab4></div></div>',1),M=_(()=>s("img",{src:z},null,-1)),P=[M],W=_(()=>s("header",{class:"app-header"},[s("h1",{class:"text"},"CityWalker"),s("div",{class:"sub-header"},"漫游城")],-1)),j={class:"post-container"},q=_(()=>s("div",{class:"welcome-section"},[s("div",{class:"welcome-text"},[s("div",{class:"welcome-text-hello"},"Hello!"),s("div",null,"欢迎来到漫游城")]),s("img",{src:H,class:"welcome-icon"})],-1)),G={class:"button-container"},J={class:"route-button"},K={class:"route-button"},Q={class:"checkbox-container"},X=y({__name:"log_in",setup(i){const c=F(),g=new A,b=async()=>{if(!e.usernameOrEmail||!e.password){n({type:"danger",message:"昵称/邮箱和密码不能为空"});return}try{const o=await g.user.loginUsingPost({information:e.usernameOrEmail,password:e.password});o.data.code===0?(n({type:"success",message:"登录成功"}),console.log(o.data),c.setRole(o.data.result.role),c.setSessionId(o.data.result.sessionId),c.setSessionData(o.data.result.sessionData),m.push("/index")):(n({type:"danger",message:"登录失败，请检查您的昵称/邮箱和密码"}),console.log(o.data))}catch{n({type:"danger",message:"请求出错，请稍后再试"})}},x=()=>{console.log("寻找搭子"),m.push("/register")},w=()=>{m.back()},e=S({usernameOrEmail:"",password:""}),d=C(!0);return(o,t)=>{const v=R,k=D;return V(),E(B,null,[L,s("div",{class:"goback"},[s("div",{class:"back-icon",onClick:w},P)]),W,s("main",null,[s("div",j,[q,f(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>l(e).usernameOrEmail=a),placeholder:"输入昵称/邮箱",class:"post-title-input"},null,512),[[h,l(e).usernameOrEmail]]),f(s("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=a=>l(e).password=a),placeholder:"输入密码",class:"post-title-input"},null,512),[[h,l(e).password]]),s("div",G,[s("div",J,[r(v,{class:"butt blue-button",onClick:b,style:{"font-size":"24px",padding:"25px 50px"}},{default:p(()=>[u("登录")]),_:1})]),s("div",K,[r(v,{class:"butt yellow-button",onClick:x,style:{"font-size":"24px",padding:"25px 30px"}},{default:p(()=>[u("没有账号？去注册")]),_:1})])])])]),s("footer",null,[s("div",Q,[r(k,{modelValue:l(d),"onUpdate:modelValue":t[2]||(t[2]=a=>I(d)?d.value=a:null),"checked-color":"#D68829",class:"checkbox_text"},{default:p(()=>[u("我已阅读并同意《漫游城社区用户协议》")]),_:1},8,["modelValue"])])])],64)}}});const rs=T(X,[["__scopeId","data-v-795a7ab4"]]);export{rs as default};
