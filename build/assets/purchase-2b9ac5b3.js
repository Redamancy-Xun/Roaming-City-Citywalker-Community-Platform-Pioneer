import{d as R,e as a,s as H,G as W,F as ie,i as L,q as B,D as j,I as Y,n as ge,y as ve,c as fe,b as m,l as z,x as J,w as p,r as he,a as _e,p as be,h as Se}from"./index-c336339f.js";import"./index-8fc61471.js";/* empty css              */import{c as we,s as ye}from"./index-832b6491.js";import{_ as Ve}from"./Back-31df5cd7.js";import{_ as se}from"./partone-71a19f17.js";import{u as Pe}from"./userStore-afec8895.js";import{A as Ce}from"./Citywalker-5c40621a.js";import{_ as ke}from"./_plugin-vue_export-helper-c27b6911.js";import{c as N,e as ue,a as pe,n as P,t as C,q as K,h as D,w as E,r as xe,l as re,s as Ie,p as Te,B as $e,k as $,v as te,g as Be,H as ne,x as ae,y as Le,z as Q,j as De,A as Re,L as Ne}from"./use-touch-78a9110c.js";import{r as Ee,u as Ae}from"./use-route-86a7542e.js";import{I as le,u as qe}from"./index-965c857b.js";import{a as G}from"./function-call-d16eb335.js";import{D as Fe}from"./index-cec5e97b.js";import"./index-d6d9cd4a.js";const[Me,x]=N("cell"),ze={tag:pe("div"),icon:String,size:String,title:P,value:P,label:P,center:Boolean,isLink:Boolean,border:C,iconPrefix:String,valueClass:K,labelClass:K,titleClass:K,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},Ge=ue({},ze,Ee);var Oe=R({name:Me,props:Ge,setup(e,{slots:n}){const c=Ae(),d=()=>{if(n.label||D(e.label))return a("div",{class:[x("label"),e.labelClass]},[n.label?n.label():e.label])},i=()=>{var s;if(n.title||D(e.title)){const f=(s=n.title)==null?void 0:s.call(n);return Array.isArray(f)&&f.length===0?void 0:a("div",{class:[x("title"),e.titleClass],style:e.titleStyle},[f||a("span",null,[e.title]),d()])}},l=()=>{const s=n.value||n.default;if(s||D(e.value))return a("div",{class:[x("value"),e.valueClass]},[s?s():a("span",null,[e.value])])},o=()=>{if(n.icon)return n.icon();if(e.icon)return a(le,{name:e.icon,class:x("left-icon"),classPrefix:e.iconPrefix},null)},S=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const s=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return a(le,{name:s,class:x("right-icon")},null)}};return()=>{var s;const{tag:f,size:w,center:I,border:_,isLink:u,required:T}=e,b=(s=e.clickable)!=null?s:u,y={center:I,required:!!T,clickable:b,borderless:!_};return w&&(y[w]=!!w),a(f,{class:x(y),role:b?"button":void 0,tabindex:b?0:void 0,onClick:c},{default:()=>{var V;return[o(),i(),l(),S(),(V=n.extra)==null?void 0:V.call(n)]}})}}});const Ue=E(Oe),[ce,He]=N("radio-group"),Ke={shape:String,disabled:Boolean,iconSize:P,direction:String,modelValue:K,checkedColor:String},de=Symbol(ce);var We=R({name:ce,props:Ke,emits:["change","update:modelValue"],setup(e,{emit:n,slots:c}){const{linkChildren:d}=xe(de),i=l=>n("update:modelValue",l);return H(()=>e.modelValue,l=>n("change",l)),d({props:e,updateValue:i}),re(()=>e.modelValue),()=>{var l;return a("div",{class:He([e.direction]),role:"radiogroup"},[(l=c.default)==null?void 0:l.call(c)])}}});const je=E(We),Ye=ue({},we,{shape:String}),[Je,Qe]=N("radio");var Xe=R({name:Je,props:Ye,emits:["update:modelValue"],setup(e,{emit:n,slots:c}){const{parent:d}=Ie(de),i=()=>(d?d.props.modelValue:e.modelValue)===e.name,l=()=>{d?d.updateValue(e.name):n("update:modelValue",e.name)};return()=>a(ye,W({bem:Qe,role:"radio",parent:d,checked:i(),onToggle:l},e),Te(c,["default","icon"]))}});const Ze=E(Xe),[et,oe]=N("cell-group"),tt={title:String,inset:Boolean,border:C};var nt=R({name:et,inheritAttrs:!1,props:tt,setup(e,{slots:n,attrs:c}){const d=()=>{var l;return a("div",W({class:[oe({inset:e.inset}),{[$e]:e.border&&!e.inset}]},c,qe()),[(l=n.default)==null?void 0:l.call(n)])},i=()=>a("div",{class:oe("title",{inset:e.inset})},[n.title?n.title():e.title]);return()=>e.title||n.title?a(ie,null,[i(),d()]):d()}});const at=E(nt),[lt,O]=N("stepper"),ot=200,U=(e,n)=>String(e)===String(n),it={min:$(1),max:$(1/0),name:$(""),step:$(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:C,showMinus:C,showInput:C,longPress:C,autoFixed:C,allowEmpty:Boolean,modelValue:P,inputWidth:P,buttonSize:P,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:$(1),decimalLength:P};var st=R({name:lt,props:it,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:n}){const c=(t,r=!0)=>{const{min:g,max:F,allowEmpty:v,decimalLength:M}=e;return v&&t===""||(t=ae(String(t),!e.integer),t=t===""?0:+t,t=Number.isNaN(t)?+g:t,t=r?Math.max(Math.min(+F,t),+g):t,D(M)&&(t=t.toFixed(+M))),t},d=()=>{var t;const r=(t=e.modelValue)!=null?t:e.defaultValue,g=c(r);return U(g,e.modelValue)||n("update:modelValue",g),g};let i;const l=L(),o=L(d()),S=B(()=>e.disabled||e.disableMinus||+o.value<=+e.min),s=B(()=>e.disabled||e.disablePlus||+o.value>=+e.max),f=B(()=>({width:te(e.inputWidth),height:te(e.buttonSize)})),w=B(()=>Be(e.buttonSize)),I=()=>{const t=c(o.value);U(t,o.value)||(o.value=t)},_=t=>{e.beforeChange?De(e.beforeChange,{args:[t],done(){o.value=t}}):o.value=t},u=()=>{if(i==="plus"&&s.value||i==="minus"&&S.value){n("overlimit",i);return}const t=i==="minus"?-e.step:+e.step,r=c(Re(+o.value,t));_(r),n(i)},T=t=>{const r=t.target,{value:g}=r,{decimalLength:F}=e;let v=ae(String(g),!e.integer);if(D(F)&&v.includes(".")){const ee=v.split(".");v=`${ee[0]}.${ee[1].slice(0,+F)}`}e.beforeChange?r.value=String(o.value):U(g,v)||(r.value=v);const M=v===String(+v);_(M?+v:v)},b=t=>{var r;e.disableInput?(r=l.value)==null||r.blur():n("focus",t)},y=t=>{const r=t.target,g=c(r.value,e.autoFixed);r.value=String(g),o.value=g,ge(()=>{n("blur",t),Le()})};let V,k;const q=()=>{k=setTimeout(()=>{u(),q()},ot)},h=()=>{e.longPress&&(V=!1,clearTimeout(k),k=setTimeout(()=>{V=!0,u(),q()},Ne))},X=t=>{e.longPress&&(clearTimeout(k),V&&Q(t))},me=t=>{e.disableInput&&Q(t)},Z=t=>({onClick:r=>{Q(r),i=t,u()},onTouchstartPassive:()=>{i=t,h()},onTouchend:X,onTouchcancel:X});return H(()=>[e.max,e.min,e.integer,e.decimalLength],I),H(()=>e.modelValue,t=>{U(t,o.value)||(o.value=c(t))}),H(o,t=>{n("update:modelValue",t),n("change",t,{name:e.name})}),re(()=>e.modelValue),()=>a("div",{role:"group",class:O([e.theme])},[j(a("button",W({type:"button",style:w.value,class:[O("minus",{disabled:S.value}),{[ne]:!S.value}],"aria-disabled":S.value||void 0},Z("minus")),null),[[Y,e.showMinus]]),j(a("input",{ref:l,type:e.integer?"tel":"text",role:"spinbutton",class:O("input"),value:o.value,style:f.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":o.value,onBlur:y,onInput:T,onFocus:b,onMousedown:me},null),[[Y,e.showInput]]),j(a("button",W({type:"button",style:w.value,class:[O("plus",{disabled:s.value}),{[ne]:!s.value}],"aria-disabled":s.value||void 0},Z("plus")),null),[[Y,e.showPlus]])])}});const ut=E(st);const A=e=>(be("data-v-91074293"),e=e(),Se(),e),rt=A(()=>m("img",{src:Ve},null,-1)),ct=[rt],dt=A(()=>m("div",{class:"image-container"},[m("img",{src:se,alt:"routeone"})],-1)),mt={class:"people-container"},gt=A(()=>m("span",{class:"people-text"},"人数:",-1)),vt={class:"custom-stepper"},ft={class:"time-container"},ht=A(()=>m("div",{class:"time-text"}," 时间 ",-1)),_t={class:"custom-radio"},bt={class:"custom-dialog"},St=A(()=>m("img",{src:se,class:"dialog-image"},null,-1)),wt={__name:"purchase",setup(e){const n=ve(),c=Pe(),d=new Ce,i=L(1),l=L("1"),o=L(!1),S=()=>{he.back()},s=B(()=>n.query.action==="1"?"是否要加入购物车":"是否要购买"),f=()=>{o.value=!0};console.log(n.query.routeId);const w=()=>{G({type:"danger",message:"订单已取消"})},I=async()=>{if(n.query.action==="1")try{const _=await d.shoppingCart.addShoppingCartUsingPost({routeId:n.query.routeId,routePeople:i.value,routeTime:l.value},{session:c.sessionId});console.log("API Response:",_),G({type:"success",message:"加入购物车成功"}),o.value=!1}catch(_){console.error("加入购物车失败:",_),G({type:"danger",message:"加入购物车失败"})}else n.query.action==="0"&&G({type:"success",message:"下单成功"})};return(_,u)=>{const T=ut,b=Ze,y=Ue,V=at,k=je,q=Fe;return _e(),fe(ie,null,[m("header",null,[m("div",{class:"back-icon",onClick:S},ct)]),m("main",null,[dt,m("div",mt,[gt,m("div",vt,[a(T,{modelValue:z(i),"onUpdate:modelValue":u[0]||(u[0]=h=>J(i)?i.value=h:null),integer:"",theme:"round"},null,8,["modelValue"])])]),m("div",ft,[ht,m("div",_t,[a(k,{modelValue:z(l),"onUpdate:modelValue":u[4]||(u[4]=h=>J(l)?l.value=h:null)},{default:p(()=>[a(V,{inset:""},{default:p(()=>[a(y,{title:"2024.3.1 上午10：00",clickable:"",onClick:u[1]||(u[1]=h=>l.value="1")},{"right-icon":p(()=>[a(b,{name:"1"})]),_:1}),a(y,{title:"2024.3.11 上午10：00",clickable:"",onClick:u[2]||(u[2]=h=>l.value="2")},{"right-icon":p(()=>[a(b,{name:"2"})]),_:1}),a(y,{title:"2024.3.12 上午10：00",clickable:"",onClick:u[3]||(u[3]=h=>l.value="3")},{"right-icon":p(()=>[a(b,{name:"3"})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),m("div",null,[m("button",{class:"next-button",onClick:f},"下一步")])]),m("div",bt,[a(q,{show:z(o),"onUpdate:show":u[5]||(u[5]=h=>J(o)?o.value=h:null),title:z(s),"show-cancel-button":"",onCancel:w,onConfirm:I},{default:p(()=>[St]),_:1},8,["show","title"])])],64)}}},Et=ke(wt,[["__scopeId","data-v-91074293"]]);export{Et as default};
