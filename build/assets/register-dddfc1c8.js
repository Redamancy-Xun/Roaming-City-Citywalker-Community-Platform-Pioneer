import{d as C,s as U,i as P,a as R,c as B,b as e,v as d,x as n,u as a,e as u,w as m,f as _,n as N,F as S,g as E,r as f,p as I,h as z}from"./index-7421df47.js";import{C as A}from"./index-c3e15be2.js";import"./index-3fb4e60e.js";import{E as D}from"./el-button-b3280c6e.js";import{_ as F}from"./Back-64c2790a.js";import{A as T}from"./Citywalker-1838a2bc.js";import{a as l}from"./function-call-eaca0cc0.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-dcd1bf9c.js";import"./use-touch-fbe6bb65.js";import"./use-scope-id-02176d93.js";import"./index-05100a24.js";const L=""+new URL("icontwo-45220a3b.png",import.meta.url).href,g=c=>(I("data-v-06d24653"),c=c(),z(),c),M=E('<div class="clouds" data-v-06d24653><div class="cloud" id="cloud1" data-v-06d24653></div><div class="cloud" id="cloud2" data-v-06d24653></div><div class="cloud" id="cloud3" data-v-06d24653></div><div class="cloud" id="cloud4" data-v-06d24653></div></div>',1),W=g(()=>e("img",{src:F},null,-1)),$=[W],j=g(()=>e("header",{class:"app-header"},[e("h1",{class:"text"},"CityWalker"),e("div",{class:"sub-header"},"漫游城")],-1)),q={class:"post-container"},G=g(()=>e("div",{class:"welcome-section"},[e("div",{class:"welcome-text"},[e("div",{class:"welcome-text-hello"},"Hello!"),e("div",null,"欢迎来到漫游城")]),e("img",{src:L,class:"welcome-icon"})],-1)),J={class:"email-input-group"},K={class:"button-container"},O={class:"route-button"},Q={class:"route-button"},X={class:"checkbox-container"},Y=C({__name:"register",setup(c){const w=async()=>{if(!s.code){l({type:"danger",message:"请输入验证码"});return}try{if((await r.user.verifyCodeUsingPost({code:s.code,email:s.email})).data.result){if(s.password!==s.confirmPassword){l({type:"danger",message:"密码和确认密码不匹配"});return}const t=await r.user.signUpUsingPost({username:s.username,password:s.password,email:s.email});t.data.code===0?(l({type:"success",message:"注册成功"}),console.log(t.data)):(l({type:"danger",message:"注册失败，请稍后再试"}),console.log(t.data))}else l({type:"danger",message:"验证码错误"})}catch{l({type:"danger",message:"请求出错，请稍后再试"})}},y=()=>{f.back()},x=()=>{f.push("/log_in")},h=()=>{w()},s=U({username:"",password:"",confirmPassword:"",email:"",code:""}),r=new T,b=i=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(i),k=async()=>{if(!s.email){l({type:"danger",message:"请填写邮箱"});return}if(!b(s.email)){l({type:"danger",message:"邮箱格式不正确"});return}try{const i=await r.user.sendCodeUsingPost({email:s.email});console.log(i.data),l({type:"success",message:"验证码已发送"})}catch{l({type:"danger",message:"验证码发送失败，请稍后重试"})}},p=P(!0);return(i,t)=>{const v=D,V=A;return R(),B(S,null,[M,e("div",{class:"goback"},[e("div",{class:"back-icon",onClick:y},$)]),j,e("main",null,[e("div",q,[G,d(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>a(s).username=o),placeholder:"取个昵称",class:"post-title-input"},null,512),[[n,a(s).username]]),d(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=o=>a(s).password=o),placeholder:"设置密码",class:"post-title-input"},null,512),[[n,a(s).password]]),d(e("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=o=>a(s).confirmPassword=o),placeholder:"验证密码",class:"post-title-input"},null,512),[[n,a(s).confirmPassword]]),d(e("input",{type:"email","onUpdate:modelValue":t[3]||(t[3]=o=>a(s).email=o),placeholder:"输入邮箱",class:"post-title-input"},null,512),[[n,a(s).email]]),e("div",J,[d(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>a(s).code=o),placeholder:"输入验证码",class:"post-title-input-code"},null,512),[[n,a(s).code]]),e("button",{class:"text-button",onClick:k},"获取验证码")]),e("div",K,[e("div",O,[u(v,{class:"butt yellow-button",onClick:h,style:{"font-size":"24px",padding:"25px 50px"}},{default:m(()=>[_("注册账号")]),_:1})]),e("div",Q,[u(v,{class:"butt blue-button",onClick:x,style:{"font-size":"24px",padding:"25px 30px"}},{default:m(()=>[_("已有账号？去登录")]),_:1})])])])]),e("footer",null,[e("div",X,[u(V,{modelValue:a(p),"onUpdate:modelValue":t[5]||(t[5]=o=>N(p)?p.value=o:null),"checked-color":"#D68829",class:"checkbox_text"},{default:m(()=>[_("我已阅读并同意《漫游城社区用户协议》")]),_:1},8,["modelValue"])])])],64)}}});const pe=H(Y,[["__scopeId","data-v-06d24653"]]);export{pe as default};
